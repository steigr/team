coreos_unit() {
  if [[ $# -ge 2 ]]; then
    unit="${2}.${1}"
    case "$1" in
      socket)
        sd_dir="/etc/systemd/system"
      ;;
    esac
  else
    unit="${1}.service"
  fi
  echo "${sd_dir:-/etc/systemd/system}/${unit}"
}

coreos_start() {
  systemctl start $1
}

coreos_stop() {
  systemctl stop $1
}

coreos_restart() {
  systemctl restart $1
}
coreos_init() {
  case "$1" in
    reload)
      systemctl daemon-reload
    ;;
  esac
}

coreos_socket() {
  systemctl enable $1.socket
}

coreos_status() {
  systemctl status $1 2>/dev/null >/dev/null
}

coreos_unit_present() {
  test "$(systemctl list-unit-files | grep docker | grep $1)"
}